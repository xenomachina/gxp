# Using GXP from the command-line #

## Initial Setup ##

First, youll need to [http://code.google.com/p/gxp/downloads/list
download the GXP jar].

Once that's done, make sure it will run correctly in your environment by
executing:
```
java -cp gxp-0.2.4-beta.jar com.google.gxp.compiler.cli.Gxpc --help
```
You should see something like this:
```
Usage: gxpc [flags...] [args...]
 --depend VAL          : location of dependency info file; enables dependency
                         checking
 --dir VAL             : output directory
 --dot VAL             : phase to produce graphviz "dot" output for;
                         can be repeated (useful for debugging compiler)
 --dynamic             : indicate dynamic mode
 --error VAL           : Sets error options. VAL can be one of:
                         i18n (enable i18n errors)
 --g                   : include debugging comments in HTML output
 --help                : display this help message
 --message_source VAL  : Message source for retrieving messages at runtime.
                         eg: com.google.foo.bar_messages
 --output VAL          : output this file; can be repeated. If not specified,
                         all files will be output.
 --output_language VAL : output files for this language; can be repeated.
 --output_properties   : indicates that gxpc should output a properties file
 --schema VAL          : a schema file used for compilation; can be repeated.
 --source VAL          : base directory for source
 --verbose             : enable verbose mode
 --warn VAL            : Sets warning options. VAL can be one of:
                         i18n (enable i18n warnings),
                         error (warnings are errors)
```
If that's what you see, then move on to the next section.

If you get an error message like "`Exception in thread "main"
java.lang.UnsupportedClassVersionError: Bad version number in .class
file`" then you're using an old version of Java. To run the GXP compiler
you'll need at least version 1.6 of Java.

## Typical Usage ##

A typical GXP command line takes the form:
```
java -cp gxp-0.2.4-beta.jar com.google.gxp.compiler.cli.Gxpc
  --verbose
  --dir /my/home/directory/bld
  --source /my/home/directory/src
  --output_language java
  --output_properties
  --message_source com.example.foo.bar_messages
  /my/home/directory/src/com/example/*.gxp

```

You'd normally write all of this on one line, but they're broken out
line-by-line here to make it easier for us to go through the flags one
by one:

The `--verbose` just makes the compiler give you more verbose
messages. Other than that, it has no effect on the compiler's operation,
but it can be useful when debugging your build process, or just to get a
feel for what the compiler is doing. You can omit this flag to reduce
the verbosity.

The `--dir` flag indicates the base directory for producing output.
It defaults to the current working directory. Note that this is just a
**base** directory. The compiler will create subdirectories under this
directory for some of its output.

The `--source` flag is sort of the inverse of `--dir`: it
indicates the package base directory of your source tree. Imagine that
you've got a template called "`com.example.Foo`" in the directory
"`/my/home/directory/src/com/example`". You'd use "`/my/home/directory/src`"
as the value for the `--source` flag, so that the compiler knows
that the remaining "`com/example`" part of the filename corresponds to the
template's package ("`com.example`"). The `--source` flag can actually
take a list of directories if you have your souce code split into
multiple trees. This flag also defaults to the current directory.

The next flag is `--output_language`, which takes a list of output
language codes, and is used to tell the compiler what sort of cde you'd
like it to generate. In this example we're passing "java", which tells
it to generate a Java source file for each of the input GXP files.
You'll almost always want to include this flag.

The `--output_properties` flag is used for internationalization
(i18n): it tells the compiler that in addition to the output files
specified by the `--output_language` flag, it should also create a
properties file containing the messages that can be extracted from your
GXP files.

The `--message_source` flag is only necessary if you're using the
i18n features of GXP. It indicates the resource
bundle that should be used  This has two effects: first, it determines
the filename that will be used for the properties file generated by the
`--output_properties` flag; second, it encodes the resorce bundle
name into the compiled templates so that they can look up the extracted
messages (or their translations) at runtime.

Finally, after all of the flags, are the input files. These are the
`.gxp` files that you want to be compiled. Note that the compiler will
fail if you ask to to cal a GXP file that calls another GXP file that it
hasn't been told about.

Once you've compiled your `.gxp` files into `.java` files you'll need to
compile them the same way you compile your hand-written `.java` files,
like using `javac` or your IDE. You'll need to include the GXP jar in the
classpath for this step, as it also contains the GXP runtime libraries.